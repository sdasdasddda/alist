import{_ as K,d as M,e as k,f as O,r as C,u as P,w as Q,g as c,a as z,h as i,i as b,j as E,c as o,k as u,l as s,t as V,m as d,n as U,p as A,q as D,b as q,s as G,v as H,x as J,y as W,z as X,A as Y}from"./index-c42bf1ef.js";const Z=r=>(J("data-v-74456f4d"),r=r(),W(),r),$={class:"login-container columnCC"},ee={class:"title-container"},se={class:"title text-center"},oe={class:"rowSC"},te={class:"svg-container"},ne=Z(()=>s("div",{class:"show-pwd"},null,-1)),ae={class:"rowSC flex-1"},le={class:"svg-container"},ce={class:"tip-message"},re=M({}),ie=Object.assign(re,{__name:"index",setup(r){const{settings:S}=k(),_=O().formRules,a=C({username:"admin",password:""}),f=C({otherQuery:{},redirect:void 0}),N=P(),B=e=>Object.keys(e).reduce((t,n)=>(n!=="redirect"&&(t[n]=e[n]),t),{});Q(()=>N.query,e=>{e&&(f.redirect=e.redirect,f.otherQuery=B(e))},{immediate:!0});let p=c(!1),v=c("");const w=c(null),g=()=>{w.value.validate(e=>{p.value=!0,e&&T()})},L=z(),R=k(),T=()=>{X(a).then(({data:e})=>{Y("登录成功"),R.setToken(e==null?void 0:e.jwtToken),L.push("/")}).catch(e=>{v.value=e==null?void 0:e.msg}).finally(()=>{p.value=!1})},l=c("password"),h=c(null),j=()=>{l.value==="password"?l.value="":l.value="password",G(()=>{h.value.focus()})};return(e,t)=>{const n=H,y=i("el-input"),x=i("el-form-item"),F=i("el-button"),I=i("el-form");return b(),E("div",$,[o(I,{ref_key:"refLoginForm",ref:w,class:"login-form",model:a,rules:d(_)},{default:u(()=>[s("div",ee,[s("h3",se,V(d(S).title),1)]),o(x,{prop:"username",rules:d(_).isNotNull("usename不能为空")},{default:u(()=>[s("div",oe,[s("span",te,[o(n,{"icon-class":"user"})]),o(y,{modelValue:a.username,"onUpdate:modelValue":t[0]||(t[0]=m=>a.username=m),placeholder:"用户名(admin)"},null,8,["modelValue"]),ne])]),_:1},8,["rules"]),o(x,{prop:"password",rules:d(_).isNotNull("密码不能为空")},{default:u(()=>[s("div",ae,[s("span",le,[o(n,{"icon-class":"password"})]),(b(),U(y,{key:l.value,ref_key:"refPassword",ref:h,modelValue:a.password,"onUpdate:modelValue":t[1]||(t[1]=m=>a.password=m),type:l.value,name:"password",placeholder:"password",onKeyup:A(g,["enter"])},null,8,["modelValue","type","onKeyup"])),s("span",{class:"show-pwd",onClick:j},[o(n,{"icon-class":l.value==="password"?"eye":"eye-open"},null,8,["icon-class"])])])]),_:1},8,["rules"]),s("div",ce,V(v.value),1),o(F,{loading:p.value,type:"primary",class:"login-btn",size:"default",onClick:D(g,["prevent"])},{default:u(()=>[q(" Login ")]),_:1},8,["loading","onClick"])]),_:1},8,["model","rules"])])}}}),de=K(ie,[["__scopeId","data-v-74456f4d"]]);export{de as default};
